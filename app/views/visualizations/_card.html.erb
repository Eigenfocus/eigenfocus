<li class="cpy-card tour--card issue--card"
  id="<%= dom_id(issue) %>"
  data-controller="visualization--board--card"
  data-favorite-issue-labels-issue-id="<%= issue.id %>"
  data-visualization--board--card-scroll-on-connect-value="<%= local_assigns[:scroll_on_connect] == true %>"
  data-grouping-column-target="card"
  data-grouping-column-issue-id-value="<%= issue.id %>"
  data-visualization--issue-filtering-target="issue">
  <%= link_to show_visualization_issue_path(visualization, issue),
    class: "group relative flex flex-col gap-2 text-sm text-content-500 border-2 border-background-200 bg-background-50 hover:bg-background-100 hover:border-background-900 cursor-pointer shadow-sm rounded-xl card p-3",
    data: {
      turbo_frame: 'issue_detail',
      turbo_action: 'advance'
    } do %>

    <div class="hidden flex items-center justify-center p-2 text-xs flex group-hover:flex items-center absolute top-2 right-2 rounded-full  bg-background-50">
      <i class="fa fa-pencil"></i>
    </div>

    <div
      class="flex flex-row gap-2"
      data-controller="issue--finish-check"
      data-issue--finish-check-finish-path-value="<%= finish_issue_path(issue) %>"
      data-issue--finish-check-unfinish-path-value="<%= unfinish_issue_path(issue) %>"
      >
      <input
        type="checkbox"
        class="peer sr-only hidden"
        data-issue--finish-check-target="checkbox"
        <%= issue.finished? ? "checked" : nil %>
      />
      <div
        class="issue--finish-check shrink-0 size-4 group/check cpy-finish-check-toogle"
        data-controller="animation"
        data-action="click->issue--finish-check#toogle:prevent issue--finish-check:checked->animation#zoomIn issue--finish-check:unchecked->animation#zoomOut"
        data-animation-speed-value="faster"
        >
        <i class="fa fa-check opacity-0 peer-checked:group-[]/check:opacity-100" data-animation-target="animatable"></i>
      </div>

      <p class="issue--title font-normal grow break-all" data-issue-title>
        <%= issue.title %>
      </p>
    </div>

    <%= labels_list_for(issue) %>

    <%= render partial: 'visualizations/groupings/_card/icons', locals: { issue: } %>

    <%= due_date_for(issue) %>
  <% end %>
</li>
